<%- include('../partials/header', { title: 'Listado de Notas' }) %>
<%- include('../partials/navbar') %>

<div class="max-w-6xl mx-auto px-4 py-8">
  <div class="bg-white p-6 rounded-lg shadow">
    <h1 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
      <i class="fas fa-clipboard-list text-blue-600"></i> Listado de Notas
    </h1>

    <div class="flex justify-end mb-4">
      <a href="/notas/crear" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded shadow">
        <i class="fas fa-plus mr-1"></i> Registrar Nota
      </a>
    </div>

    <div class="overflow-x-auto">
      <table class="min-w-full bg-white border rounded">
        <thead>
          <tr class="bg-gray-100 text-gray-700 text-left">
            <th class="py-2 px-4 border-b">ID</th>
            <th class="py-2 px-4 border-b">Curso</th>
            <th class="py-2 px-4 border-b">Promedio Parcial</th>
            <th class="py-2 px-4 border-b">Promedio Teoria</th>
            <th class="py-2 px-4 border-b">Condici√≥n</th>
            <th class="py-2 px-4 border-b">Estatus</th>
            <th class="py-2 px-4 border-b">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <% notas.forEach(nota => { %>
            <tr class="hover:bg-gray-50">
              <td class="py-2 px-4 border-b"><%= nota.ID_NOTA %></td>
              <td class="py-2 px-4 border-b"><%= nota.curso?.NOMBRE || 'N/A' %></td>
              <td class="py-2 px-4 border-b"><%= nota.PROMEDIOP %></td>
              <td class="py-2 px-4 border-b"><%= nota.PROMEDIOT %></td>
              <td class="py-2 px-4 border-b">
                <span class="font-semibold <%= nota.CONDICION === 'Aprobado' ? 'text-green-600' : 'text-red-600' %>">
                  <%= nota.CONDICION %>
                </span>
              </td>
              <td class="px-4 py-2">
                  <% if (nota.ESTATUS) { %>
                    <span class="text-green-600 font-semibold">Activo</span>
                  <% } else { %>
                    <span class="text-red-600 font-semibold">Inactivo</span>
                  <% } %>
                </td>
              <td class="py-2 px-4 border-b">
                <div class="flex items-center gap-2">
                  <a href="/notas/editar/<%= nota.ID_NOTA %>" class="text-blue-600 hover:underline">
                    <i class="fas fa-edit mr-1"></i>Editar
                  </a>
                  <form action="/notas/eliminar/<%= nota.ID_NOTA %>" method="POST" class="inline">
                    <button type="submit" class="text-red-600 hover:underline">
                      <i class="fas fa-trash-alt mr-1"></i>Eliminar
                    </button>
                  </form>
                </div>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>
</div>
