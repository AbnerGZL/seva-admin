<%- include('../partials/header', { title: 'Editar Usuario' }) %>
<%- include('../partials/navbar') %>

<div class="max-w-4xl mx-auto mt-8">
  <div class="bg-white p-6 rounded-lg shadow">
    <div class="mb-6 flex justify-between items-center">
      <h1 class="text-2xl font-bold text-gray-800 flex items-center gap-2">
        <i class="fas fa-user-edit text-blue-600"></i> Editar Usuario
      </h1>
      <a href="/usuarios" class="text-sm text-blue-600 hover:underline">
        ← Volver a la lista
      </a>
    </div>

    <% if (typeof error !== 'undefined' && error) { %>
      <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
        <%= error %>
      </div>
    <% } %>

    <form action="/usuarios/editar/<%= usuario.ID_USUARIO %>" method="POST" class="space-y-5">
      <input type="hidden" name="ID_USUARIO" value="<%= usuario.ID_USUARIO %>">

      <!-- Tipo de Usuario -->
      <div>
        <label for="ID_TIPO" class="block mb-1 text-gray-700 font-medium">Tipo de Usuario</label>
        <select name="ID_TIPO" id="ID_TIPO" required class="w-full px-4 py-2 border rounded-lg shadow-sm focus:ring focus:ring-blue-100">
          <% tipos.forEach(tipo => { %>
            <option value="<%= tipo.ID_TIPO %>" <%= usuario.ID_TIPO === tipo.ID_TIPO ? 'selected' : '' %>>
              <%= tipo.NOMBRE %>
            </option>
          <% }); %>
        </select>
      </div>

      <!-- Código -->
      <div>
        <label for="CODIGOU" class="block mb-1 text-gray-700 font-medium">Código</label>
        <input type="text" name="CODIGOU" id="CODIGOU" value="<%= usuario.CODIGOU %>" required
          class="w-full px-4 py-2 border rounded-lg shadow-sm focus:ring focus:ring-blue-100">
      </div>

      <!-- Email -->
      <div>
        <label for="EMAIL" class="block mb-1 text-gray-700 font-medium">Email</label>
        <input type="email" name="EMAIL" id="EMAIL" value="<%= usuario.EMAIL %>" required
          class="w-full px-4 py-2 border rounded-lg shadow-sm focus:ring focus:ring-blue-100">
      </div>

      <!-- Contraseña -->
      <div>
        <label for="CONTRASEÑA" class="block mb-1 text-gray-700 font-medium">Nueva Contraseña <span class="text-sm text-gray-500">(dejar en blanco para no cambiar)</span></label>
        <input type="password" name="CONTRASEÑA" id="CONTRASEÑA"
          class="w-full px-4 py-2 border rounded-lg shadow-sm focus:ring focus:ring-blue-100">
      </div>

      <!-- Botones -->
      <div class="flex justify-end space-x-3">
        <a href="/usuarios" class="px-4 py-2 rounded-lg bg-gray-500 text-white hover:bg-gray-600 transition">
          Cancelar
        </a>
        <button type="submit" class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition">
          Actualizar Usuario
        </button>
      </div>
    </form>
  </div>
</div>
